{% extends "base.html" %} {% block title %}Iniciar sesión{% endblock %} {% block
styles %}
<style>
  /* Estilos Neumórficos Compartidos */
  :root {
    --neumorphic-bg-light: #e0e5ec;
    --neumorphic-bg-dark: #2c3036;
    --neumorphic-text-light: #5b626d;
    --neumorphic-text-dark: #bdc1c6;
    --neumorphic-shadow-light-1: #ffffff;
    --neumorphic-shadow-light-2: #a3b1c6;
    --neumorphic-shadow-dark-1: #383c44;
    --neumorphic-shadow-dark-2: #202328;
    --orange-base: #ea580c;
    --orange-hover: #f97316;
    --cyan-base: #06b6d4;
  }

  .auth-container {
    background-color: var(--neumorphic-bg-light);
    transition: background-color 0.3s ease;
  }

  [data-bs-theme="dark"] .auth-container {
    background-color: var(--neumorphic-bg-dark);
  }

  .neumorphic-card {
    border-radius: 40px;
    background: var(--neumorphic-bg-light);
    box-shadow: 12px 12px 24px var(--neumorphic-shadow-light-2),
      -12px -12px 24px var(--neumorphic-shadow-light-1);
    border: none;
    transition: all 0.3s ease;
  }

  [data-bs-theme="dark"] .neumorphic-card {
    background: var(--neumorphic-bg-dark);
    box-shadow: 12px 12px 24px var(--neumorphic-shadow-dark-2),
      -12px -12px 24px var(--neumorphic-shadow-dark-1);
  }

  .neumorphic-input {
    border-radius: 20px;
    border: none;
    background: var(--neumorphic-bg-light);
    box-shadow: inset 7px 7px 14px var(--neumorphic-shadow-light-2),
      inset -7px -7px 14px var(--neumorphic-shadow-light-1);
    color: var(--neumorphic-text-light);
    padding: 1rem 1.5rem;
    height: auto;
  }
  .neumorphic-input:focus {
    background: var(--neumorphic-bg-light);
    box-shadow: inset 4px 4px 8px var(--neumorphic-shadow-light-2),
      inset -4px -4px 8px var(--neumorphic-shadow-light-1);
    color: var(--neumorphic-text-light);
  }

  [data-bs-theme="dark"] .neumorphic-input {
    background: var(--neumorphic-bg-dark);
    box-shadow: inset 7px 7px 14px var(--neumorphic-shadow-dark-2),
      inset -7px -7px 14px var(--neumorphic-shadow-dark-1);
    color: var(--neumorphic-text-dark);
  }
  [data-bs-theme="dark"] .neumorphic-input:focus {
    background: var(--neumorphic-bg-dark);
    box-shadow: inset 4px 4px 8px var(--neumorphic-shadow-dark-2),
      inset -4px -4px 8px var(--neumorphic-shadow-dark-1);
    color: var(--neumorphic-text-dark);
  }

  .neumorphic-btn {
    border-radius: 20px;
    border: none;
    font-weight: 600;
    padding: 0.9rem;
    color: white;
    text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.2);
    background: var(--orange-base);
    box-shadow: 6px 6px 12px var(--neumorphic-shadow-light-2),
      -6px -6px 12px var(--neumorphic-shadow-light-1);
    transition: all 0.2s ease-in-out;
  }
  .neumorphic-btn:hover {
    background: var(--orange-hover);
    color: white;
    transform: translateY(-2px);
    box-shadow: 8px 8px 16px var(--neumorphic-shadow-light-2),
      -8px -8px 16px var(--neumorphic-shadow-light-1);
  }
  .neumorphic-btn:active {
    color: white !important;
    transform: translateY(1px);
    box-shadow: inset 4px 4px 8px #c54a0a, inset -4px -4px 8px #ff660e !important;
  }
  .neumorphic-btn:disabled {
    background: #bdc3c7;
    color: #7f8c8d;
    box-shadow: inset 3px 3px 6px #9fa6aa, inset -3px -3px 6px #d9e0e4;
    cursor: not-allowed;
  }

  [data-bs-theme="dark"] .neumorphic-btn {
    box-shadow: 6px 6px 12px var(--neumorphic-shadow-dark-2),
      -6px -6px 12px var(--neumorphic-shadow-dark-1);
  }
  [data-bs-theme="dark"] .neumorphic-btn:hover {
    box-shadow: 8px 8px 16px var(--neumorphic-shadow-dark-2),
      -8px -8px 16px var(--neumorphic-shadow-dark-1);
  }
  [data-bs-theme="dark"] .neumorphic-btn:active {
    box-shadow: inset 4px 4px 8px #c54a0a, inset -4px -4px 8px #ff660e !important;
  }
  [data-bs-theme="dark"] .neumorphic-btn:disabled {
    background: #34495e;
    color: #95a5a6;
    box-shadow: inset 3px 3px 6px #2c3e50, inset -3px -3px 6px #3c546e;
  }

  .neumorphic-logo {
    border-radius: 50%;
    padding: 20px;
    background: var(--neumorphic-bg-light);
    box-shadow: 10px 10px 20px var(--neumorphic-shadow-light-2),
      -10px -10px 20px var(--neumorphic-shadow-light-1);
    transition: all 0.3s ease;
  }
  [data-bs-theme="dark"] .neumorphic-logo {
    background: var(--neumorphic-bg-dark);
    box-shadow: 10px 10px 20px var(--neumorphic-shadow-dark-2),
      -10px -10px 20px var(--neumorphic-shadow-dark-1);
  }

  .form-control:focus,
  .form-check-input:focus {
    box-shadow: none;
  }
</style>
{% endblock %} {% block content %}
<div
  class="auth-container d-flex align-items-center justify-content-center min-vh-70 p-3 p-md-4"
>
  <div class="col-lg-10 col-xl-9">
    <div class="card neumorphic-card">
      <div class="card-body p-0">
        <div class="row g-0">
          <!-- Panel Izquierdo: Branding -->
          <div
            class="col-lg-6 d-none d-lg-flex flex-column justify-content-center align-items-center text-center p-5"
          >
            <div class="neumorphic-logo mb-4">
              <svg
                style="height: 6rem"
                viewBox="0 0 512 512"
                xmlns="http://www.w3.org/2000/svg"
              >
                <defs>
                  <linearGradient
                    id="flameGradient"
                    x1="256"
                    y1="16"
                    x2="256"
                    y2="496"
                    gradientUnits="userSpaceOnUse"
                  >
                    <stop stop-color="#F97316" />
                    <stop offset="1" stop-color="#EA580C" />
                  </linearGradient>
                  <filter
                    id="inner-shadow"
                    x="-50%"
                    y="-50%"
                    width="200%"
                    height="200%"
                  >
                    <feComponentTransfer in="SourceAlpha">
                      <feFuncA type="table" tableValues="1 0" />
                    </feComponentTransfer>
                    <feGaussianBlur stdDeviation="8" />
                    <feOffset dx="0" dy="10" result="offsetblur" />
                    <feFlood flood-color="rgba(0,0,0,0.5)" result="color" />
                    <feComposite in2="offsetblur" operator="in" />
                    <feComposite in2="SourceAlpha" operator="in" />
                    <feMerge>
                      <feMergeNode in="SourceGraphic" />
                      <feMergeNode />
                    </feMerge>
                  </filter>
                </defs>
                <g filter="url(#inner-shadow)">
                  <path
                    d="M256 16C141.6 16 48 109.6 48 224C48 308.2 96.2 380.4 176 416.4V464C176 481.6 190.4 496 208 496H304C321.6 496 336 481.6 336 464V416.4C415.8 380.4 464 308.2 464 224C464 109.6 370.4 16 256 16Z"
                    fill="url(#flameGradient)"
                  />
                  <path
                    d="M256 320C224.8 320 200 295.2 200 264C200 240.4 213.6 220.2 234.4 212.4L256 128L277.6 212.4C298.4 220.2 312 240.4 312 264C312 295.2 287.2 320 256 320Z"
                    fill="white"
                    fill-opacity="0.8"
                  />
                  <path
                    d="M256 128L234.4 212.4C213.6 220.2 200 240.4 200 264C200 274.8 204.4 284.4 211.6 291.6C218.8 284.4 223.2 274.8 223.2 264C223.2 248.8 236.8 234.4 252.8 231.2L256 128Z"
                    fill="#22D3EE"
                    fill-opacity="0.5"
                  />
                </g>
              </svg>
            </div>
            <h2 class="h4 fw-bold">Forja tus rachas</h2>
            <p class="text-secondary">Domina tus hábitos y alcanza tus metas</p>
          </div>
          <!-- Panel Derecho: Formulario -->
          <div class="col-lg-6 p-4 p-md-5">
            <div class="text-center mb-4">
              <h1 class="h4 fw-bold">¡Bienvenido de nuevo!</h1>
            </div>
            <form id="login-form" action="" method="post" novalidate>
              {{ form.hidden_tag() }}
              <div class="mb-4">
                {{ form.username.label(class="form-label visually-hidden") }} {{
                form.username(class="form-control neumorphic-input",
                placeholder="Correo electrónico") }} {% for error in
                form.username.errors %}
                <div class="invalid-feedback d-block">{{ error }}</div>
                {% endfor %}
              </div>
              <div class="mb-4">
                {{ form.password.label(class="form-label visually-hidden") }} {{
                form.password(class="form-control neumorphic-input",
                placeholder="Contraseña") }} {% for error in
                form.password.errors %}
                <div class="invalid-feedback d-block">{{ error }}</div>
                {% endfor %}
              </div>
              <div
                class="mb-4 d-flex justify-content-between align-items-center"
              >
                <div class="form-check">
                  {{ form.remember_me(class="form-check-input") }} {{
                  form.remember_me.label(class="form-check-label small") }}
                </div>
                <a href="#" class="small text-orange"
                  >¿Olvidaste tu contraseña?</a
                >
              </div>
              <div class="d-grid">
                {{ form.submit(class="btn neumorphic-btn", id="submit-btn") }}
              </div>
            </form>
            <hr class="my-4" />
            <div class="text-center">
              <p class="small text-secondary">
                ¿No tienes una cuenta?
                <a href="{{ url_for('register') }}" class="text-orange fw-bold"
                  >Regístrate</a
                >
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block scripts %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("login-form");
    const submitBtn = document.getElementById("submit-btn");
    const requiredInputs = form.querySelectorAll(
      '[data-required="true"], [required]'
    );

    function checkFormValidity() {
      if (!form || !submitBtn) return;
      let allValid = true;
      requiredInputs.forEach((input) => {
        if (!input.value.trim()) {
          allValid = false;
        }
      });
      submitBtn.disabled = !allValid;
    }

    if (form && submitBtn) {
      // Ejecutar al inicio
      checkFormValidity();

      // Añadir listeners
      requiredInputs.forEach((input) => {
        input.addEventListener("input", checkFormValidity);
      });
    }
  });
</script>
{% endblock %}
